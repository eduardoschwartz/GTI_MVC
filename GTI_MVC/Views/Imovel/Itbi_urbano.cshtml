@model GTI_Mvc.ViewModels.ItbiViewModel

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "ITBI Urbano";
}
<link href="~/Content/Baloon.css" rel="stylesheet" />
<style>
    .center {
        margin: auto;
        width: 730px;
        padding: 20px;
    }

    .actionlink:hover {
        color: darkgreen;
    }

    .actionlink {
        color: darkslateblue;
    }

    .hidden {
        display: none;
    }

    .show {
        display: block;
    }
   
</style>


<div class="center">

    @using (Html.BeginForm("Itbi_urbano", "Imovel", FormMethod.Post, new { @id = "MainForm" })) {

        <div class="container" style="width:700px">
            <div class="panel panel-danger">
                <div class="panel-heading">Declaração de transações imobiliárias (Imóveis Urbanos) </div>
                <div class="panel-body">
                    <div style="padding-left:7px">

                        <table style="font-size:14px;width:640px">
                            <tr style="height:30px">
                                <td style="width:154px">
                                    <label style="font-weight:normal">Código do imóvel:</label>
                                </td>
                                <td>
                                    @if (@Model.Inscricao == null) {
                                        @Html.TextBoxFor(m => m.Codigo, new { @id = "codigo", @style = "width:100px;height:25px", @onKeyPress = "return formata(this, '§§§§§', event)" })
                                        <label>&nbsp;&nbsp;</label>
                                        <button id="btnCodigoOk" type="submit" class="btn btn-primary" name="action" value="btnCodigoOK">Consultar</button>
                                        <label style="font-weight:normal;font-size:14px;color:brown">&nbsp;&nbsp;(Encontra-se na capa do carnê de IPTU)&nbsp;&nbsp;</label><br />
                                    } else {
                                        @Html.TextBoxFor(m => m.Codigo, new { @id = "codigo", @style = "width:100px;height:25px;color:blue", @onKeyPress = "return formata(this, '§§§§§', event)", @readonly = true })
                                        <label>&nbsp;&nbsp;</label>
                                        <button id="btnCodigoCancel" type="submit" class="btn btn-danger" onclick="return cancelarCodigo()" name="action" value="btnCodigoCancel" data-balloon-length="medium" aria-label="Ao cancelar, todos os dados inseridos neste lançamento de ITBI serão perdidos." data-balloon-pos="right">Cancelar</button>
                                    }
                                </td>
                            </tr>
                        </table>
                    </div>
                    @if (@Model.Inscricao != null) {
                        <div style="padding-left:7px">

                            <table style="font-size:14px;width:640px">
                                <tr style="height:30px">
                                    <td style="width:154px">
                                        <label style="font-weight:normal;padding-top:7px">Proprietário principal:</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;color:blue;padding-top:7px">@Html.TextBoxFor(m => m.Dados_Imovel.Proprietario_Nome, new { @readonly = true, style = "width:470px;height:25px" })</label>
                                    </td>
                                </tr>
                                <tr style="height:30px">
                                    <td style="width:154px">
                                        <label style="font-weight:normal">Inscrição cadastral:</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Inscricao, new { @readonly = true, style = "width:200px;height:25px" })</label>
                                    </td>
                                </tr>
                            </table>

                            <table style="font-size:14px;width:640px">
                                <tr style="height:30px">
                                    <td style="width:154px">
                                        <label style="font-weight:normal;">Natureza da transação:</label>
                                    </td>
                                    <td>
                                        @Html.DropDownListFor(m => m.Natureza_Codigo, ViewBag.Lista_Natureza as SelectList, "(Selecione...)", new { @id = "NaturezaDropDown", style = "width:470px;height:25px", rows = 10 })
                                    </td>
                                </tr>
                            </table>

                            <label style="font-weight:normal;text-decoration:underline;color:brown;padding-top:7px">Endereço do Imóvel:</label><br />

                            <table style="font-size:14px;width:640px">
                                <tr style="height:30px">
                                    <td style="width:62px">
                                        <label style="font-weight:normal">Cep:</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Dados_Imovel.Cep, new { style = "width:80px;height:25px", @readonly = true })</label>
                                        <label style="font-weight:normal;padding-left:10px">Logradouro:&nbsp;&nbsp;</label><label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Dados_Imovel.NomeLogradouro, new { style = "width:385px;height:25px", @readonly = true })</label>
                                    </td>
                                </tr>
                                <tr style="height:30px">
                                    <td>
                                        <label style="font-weight:normal">Número:</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Dados_Imovel.Numero, new { style = "width:80px;height:25px", @readonly = true })</label>
                                        <label style="font-weight:normal;padding-left:10px">Complemento:&nbsp;&nbsp;</label><label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Dados_Imovel.Complemento, new { style = "width:369px;height:25px", @readonly = true })</label>
                                    </td>
                                </tr>
                                <tr style="height:30px">
                                    <td>
                                        <label style="font-weight:normal">Quadra:</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Dados_Imovel.QuadraOriginal, new { style = "width:110px;height:25px", @readonly = true })</label>
                                        <label style="font-weight:normal;padding-left:10px">Lote:&nbsp;&nbsp;</label><label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Dados_Imovel.LoteOriginal, new { style = "width:110px;height:25px", @readonly = true })</label>
                                        <label style="font-weight:normal;padding-left:10px">Bairro:&nbsp;&nbsp;</label><label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Dados_Imovel.NomeBairro, new { style = "width:226px;height:25px", @readonly = true })</label>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    }
                </div>

                @if (@Model.Inscricao != null) {
                    @*#############COMPRADORES###############*@
                    <div class="panel-heading">Dados dos Compradores </div>
                    <div class="panel-body">

                        <table style="font-size:14px;width:640px">
                            <tr style="height:30px">
                                <td style="width:103px">
                                    @if (@Model.Cpf_Cnpj != null && @Model.Cpf_Cnpj != "") {
                                        <label style="font-weight:normal;">Nº Cpf/Cnpj:</label>
                                    } else {
                                        <label style="font-weight:normal;padding-left:7px">Nº Cpf/Cnpj:</label>
                                    }
                                </td>
                                <td>
                                    @if (@Model.Cpf_Cnpj != null && @Model.Cpf_Cnpj != "") {
                                        @Html.TextBoxFor(m => m.Cpf_Cnpj, new { @id = "cpfcnpjc1Txt", @style = "max-width:200px;height:25px;color:blue", @onKeyPress = "return formata(this, '§§§§§§§§§§§§§§', event)", @readonly = true })
                                    } else {
                                        @Html.TextBoxFor(m => m.Cpf_Cnpj, new { @id = "cpfcnpjc1Txt", @style = "max-width:200px;height:25px", @onKeyPress = "return formata(this, '§§§§§§§§§§§§§§', event)" })
                                    }
                                    <span style="padding-left:10px">
                                        @if (@Model.Cpf_Cnpj != null && @Model.Cpf_Cnpj != "") {
                                            <button type="submit" class="btn btn-danger" name="action" value="btnCpfCompradorCancel">Trocar Comprador</button>
                                        } else {
                                            <button type="submit" class="btn btn-primary" name="action" value="btnCpfCompradorOK">Consultar</button>
                                        }
                                    </span><br />
                                </td>
                            </tr>
                        </table>

                        @if (@Model.Cpf_Cnpj != null && @Model.Cpf_Cnpj != "") {

                            <div style="padding-top:5px">
                                <table style="font-size:14px;width:640px">
                                    <tr style="height:30px">
                                        <td style="width:103px">
                                            <label style="font-weight:normal">Nome:&nbsp;&nbsp;</label>
                                        </td>
                                        <td>
                                            <label style="font-weight:normal;color:blue">
                                                @if (Model.Comprador.Nome == null) {
                                                    @Html.TextBoxFor(m => m.Comprador.Nome, new { style = "width:527px;height:25px", @value = @Model.Comprador.Nome })
                                                } else {
                                                    @Html.TextBoxFor(m => m.Comprador.Nome, new { style = "width:527px;height:25px", @readonly = true, @value = @Model.Comprador.Nome })
                                                }
                                            </label>
                                        </td>
                                    </tr>
                                </table>
                            </div>

                            <table style="font-size:14px;width:640px">
                                <tr style="height:30px">
                                    <td style="width:103px">
                                        <label style="font-weight:normal;">Nº do Cep:</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;">@Html.TextBoxFor(m => m.Comprador.Cep, new { style = "width:90px;height:25px", @onKeyPress = "return formata(this, '§§§§§-§§§', event)" })</label>
                                        <button type="submit" class="btn btn-info" name="action" value="btnCepCompradorOK">Pesquisar</button>
                                        <label style="font-size:10px;padding-left:10px">&nbsp;Caso deseje, clique <a href="http://www.buscacep.correios.com.br/sistemas/buscacep/" target="_blank">aqui</a> para consultar o Cep</label><br />
                                    </td>
                                </tr>
                            </table>

                            <div style="padding-top:5px">
                                <table style="font-size:14px;width:640px">
                                    <tr style="height:30px">
                                        <td style="width:103px">
                                            <label style="font-weight:normal">Logradouro:</label>
                                        </td>
                                        <td>
                                            <label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Comprador.Logradouro_Nome, new { style = "width:392px;height:25px", @readonly = true })</label>
                                            <label style="font-weight:normal;padding-left:10px">Número:&nbsp;&nbsp;</label><label style="font-weight:normal">
                                                @Html.TextBoxFor(m => m.Comprador.Numero, new { style = "width:60px;height:25px", @onKeyPress = "return formata(this, '§§§§§', event)" })
                                            </label>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <table style="font-size:14px;width:640px">
                                <tr style="height:30px">
                                    <td style="width:103px">
                                        <label style="font-weight:normal;">Complemento:</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal">@Html.TextBoxFor(m => m.Comprador.Complemento, new { style = "width:230px;height:25px" })</label>

                                    </td>
                                    <td>
                                        <label style="font-weight:normal">&nbsp;&nbsp;Bairro:&nbsp;&nbsp;</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Comprador.Bairro_Nome, new { style = "width:230px;height:25px", @readonly = true })</label>
                                    </td>
                                </tr>
                                <tr style="height:30px">
                                    <td>
                                        <label style="font-weight:normal">Cidade:</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Comprador.Cidade_Nome, new { style = "width:230px;height:25px", @readonly = true })</label>

                                    </td>
                                    <td>
                                        <label style="font-weight:normal;padding-left:10px">UF:&nbsp;&nbsp;</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;color:blue">@Html.TextBoxFor(m => m.Comprador.UF, new { style = "width:230px;height:25px", @readonly = true })</label>
                                    </td>
                                </tr>
                                <tr style="height:30px">
                                    <td>
                                        <label style="font-weight:normal">Telefone:</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;">@Html.TextBoxFor(m => m.Comprador.Telefone, new { style = "width:230px;height:25px" })</label>

                                    </td>
                                    <td>
                                        <label style="font-weight:normal;padding-left:10px">Email:</label>
                                    </td>
                                    <td>
                                        <label style="font-weight:normal;">@Html.TextBoxFor(m => m.Comprador.Email, new { style = "width:230px;height:25px" })</label>
                                    </td>
                                </tr>
                            </table>
                        }
                    </div>

                    <div class="panel-heading">Outros Compradores </div>
                    <div class="panel-body">
                        <div style="padding-top:7px;">
                            <button type="button" class="btn btn-info" name="action" value="btnCompradorAdd" onclick="EditarComprador()">Incluir outros compradores</button>
                        </div>

                        <div id="CompradorTable" style="max-height: 247px; overflow: auto;width:700px;padding-top:7px">
                            <table id="tblComprador" class="tableContainer" style="font-size:14px;font-weight:normal;border-width:1px;border-style:None;border-collapse:collapse">
                                <thead style="background-color:brown;color:white;font-size:14px;font-weight:normal">
                                    <tr style="height:12px;">
                                        <th style="width:20px;font-weight:normal">
                                            #
                                        </th>
                                        <th style="width:420px;font-weight:normal">
                                            Nome do comprador
                                        </th>
                                        <th style="width:150px;font-weight:normal">
                                            Cpf ou Cnpj
                                        </th>
                                        <th style="width:20px;text-align:left">

                                        </th>
                                    </tr>
                                </thead>
                            </table>
                            <div style="display:none">@Html.EditorFor(model => model.Lista_Comprador)</div>
                            @foreach (var item in Model.Lista_Comprador) {
                                <table id="tblComprador" class="tableContainer" style="font-size:14px;font-weight:normal;border-width:1px;border-style:None;border-collapse:collapse;padding-left:10px">
                                    <tr>
                                        <td style="width:20px;font-weight:normal;color:blue">
                                            @Html.DisplayFor(modelItem => item.Seq)
                                            @Html.HiddenFor(modelItem => item.Seq)
                                        </td>
                                        <td style="width:420px;font-weight:normal;color:blue">
                                            @Html.DisplayFor(modelItem => item.Nome)
                                            @Html.HiddenFor(modelItem => item.Nome)
                                        </td>
                                        <td style="width:150px;font-weight:normal;color:blue">
                                            @Html.DisplayFor(modelItem => item.Cpf_Cnpj)
                                            @Html.HiddenFor(modelItem => item.Cpf_Cnpj)
                                        </td>
                                        <td>
                                            <a href="@Url.Action("Itbi_urbano","Imovel",new { @a="rc",@s=item.Seq,@guid=Model.Guid})" title="Remover comprador"> <img src="@Url.Content("~/images/cancelar.gif")" /></a>
                                        </td>
                                    </tr>
                                </table>
                            }
                        </div>
                    </div>

                    @Html.HiddenFor(m => m.Dados_Imovel.Inscricao)
                    @Html.HiddenFor(m => m.Dados_Imovel.Proprietario_Codigo)
                    @Html.HiddenFor(m => m.Dados_Imovel.Proprietario_Nome)
                    @Html.HiddenFor(m => m.Comprador.Codigo)
                    @Html.HiddenFor(m => m.Comprador.Logradouro_Codigo)
                    @Html.HiddenFor(m => m.Comprador.Bairro_Codigo)
                    @Html.HiddenFor(m => m.Comprador.Cidade_Codigo)
                    @Html.HiddenFor(m => m.Comprador_Cpf_cnpj_tmp, new { @id = "Comprador_Cpf_cnpj_tmp" })
                    @Html.HiddenFor(m => m.Comprador_Nome_tmp, new { @id = "Comprador_Nome_tmp" })
                    @Html.HiddenFor(m => m.Vendedor_Cpf_cnpj_tmp, new { @id = "Vendedor_Cpf_cnpj_tmp" })
                    @Html.HiddenFor(m => m.Vendedor_Nome_tmp, new { @id = "Vendedor_Nome_tmp" })
                    @Html.HiddenFor(m => m.Guid)

                    @*@Ajax.ActionLink("All", "Itbi_Comprador", new AjaxOptions() {HttpMethod="GET",UpdateTargetId="divComprador",InsertionMode=InsertionMode.Replace})*@

                    @*#############VENDEDORES###############*@
                    <div class="panel-heading">Dados dos Vendedores </div>
                    <div class="panel-body">
                        <div style="padding-top:7px;"><button type="button" class="btn btn-info" name="action" value="btnVendedorAdd" onclick="EditarVendedor()">Incluir vendedores</button></div>
                        <div id="VendedorTable" style="max-height: 247px; overflow: auto;width:700px;padding-top:7px">
                            <table id="tblVendedor" class="tableContainer" style="font-size:14px;font-weight:normal;border-width:1px;border-style:None;border-collapse:collapse">
                                <thead style="background-color:brown;color:white;font-size:14px;font-weight:normal">
                                    <tr style="height:12px;">
                                        <th style="width:40px;font-weight:normal">
                                            Seq
                                        </th>
                                        <th style="width:320px;font-weight:normal">
                                            Nome do vendedor
                                        </th>
                                        <th style="width:210px;font-weight:normal">
                                            Cpf ou Cnpj
                                        </th>
                                        <th>
                                            #
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                            <div style="display:none">@Html.EditorFor(model => model.Lista_Vendedor)</div>
                            @foreach (var item in Model.Lista_Vendedor) {
                                <table id="tblVendedor" class="tableContainer" style="font-size:14px;font-weight:normal;border-width:1px;border-style:None;border-collapse:collapse;padding-left:10px">
                                    <tr>
                                        <td style="width:20px;font-weight:normal;color:blue">
                                            @Html.DisplayFor(modelItem => item.Seq)
                                            @Html.HiddenFor(modelItem => item.Seq)
                                        </td>
                                        <td style="width:420px;font-weight:normal;color:blue">
                                            @Html.DisplayFor(modelItem => item.Nome)
                                            @Html.HiddenFor(modelItem => item.Nome)
                                        </td>
                                        <td style="width:150px;font-weight:normal;color:blue">
                                            @Html.DisplayFor(modelItem => item.Cpf_Cnpj)
                                            @Html.HiddenFor(modelItem => item.Cpf_Cnpj)
                                        </td>
                                        <td>
                                            <a href="@Url.Action("Itbi_urbano","Imovel",new { @a="rv",@s=item.Seq,@guid=Model.Guid})" title="Remover vendedor"> <img src="@Url.Content("~/images/cancelar.gif")" /></a>
                                        </td>
                                    </tr>
                                </table>
                            }
                        </div>
                    </div>

                    <div class="panel-heading">Outras informações </div>
                    <div class="panel-body">
                        poipoipo
                    </div>
                }

                <div class="form-group row">
                    <label style="font-weight:normal;color:red;padding-left:28px" id="errorLabel">@ViewBag.Error</label>
                </div>
            </div>

        </div>

        <div style="padding-left:15px">@Html.ActionLink("Retornar ao menu de opções", "Itbi_menu", "Imovel", null, new { @class = "actionlink" })</div>
    }
    <!-- Modal Comprador -->
    <div class="modal fade" id="CompradorModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Adicionar outro comprador</h4>
                </div>
                <div class="modal-body">

                    <table>
                        <tr style="height:30px">
                            <td>
                                <label style="font-weight:normal;font-size:14px">Digite o Cpf/Cnpj:&nbsp;&nbsp;</label>
                            </td>
                            <td>
                                <input id="cpfcnpjc2Txt" name="Cpf_Cnpj_comprador" onKeyPress="return formata(this, '§§§§§§§§§§§§§§', event)" style="width:150px;height:25px;font-size:14px" type="text" value="" />
                            </td>
                        </tr>
                        <tr style="height:30px">
                            <td>
                                <label style="font-weight:normal;font-size:14px">Digite o Nome:&nbsp;&nbsp;</label>
                            </td>
                            <td>
                                <input id="nomec2Txt" name="nome_comprador" style="width:350px;height:25px;font-size:14px" type="text" value="" />
                            </td>
                        </tr>
                    </table>
                    <br />

                    <label style="font-weight:normal;color:red;padding-left:7px" id="errorComprador">@ViewBag.Error</label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="btnCompradorOk">Incluir</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Vendedor -->
    <div class="modal fade" id="VendedorModal" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Adicionar vendedor</h4>
                </div>
                <div class="modal-body">

                    <table>
                        <tr style="height:30px">
                            <td>
                                <label style="font-weight:normal;font-size:14px">Digite o Cpf/Cnpj:&nbsp;&nbsp;</label>
                            </td>
                            <td>
                                <input id="cpfcnpjc3Txt" name="Cpf_Cnpj_vendedor" onKeyPress="return formata(this, '§§§§§§§§§§§§§§', event)" style="width:150px;height:25px;font-size:14px" type="text" value="" />
                            </td>
                        </tr>
                        <tr style="height:30px">
                            <td>
                                <label style="font-weight:normal;font-size:14px">Digite o Nome:&nbsp;&nbsp;</label>
                            </td>
                            <td>
                                <input id="nomec3Txt" name="nome_vendedor" style="width:350px;height:25px;font-size:14px" type="text" value="" />
                            </td>
                        </tr>
                    </table>
                    <br />

                    <label style="font-weight:normal;color:red;padding-left:7px" id="errorVendedor">@ViewBag.Error</label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="btnVendedorOk">Incluir</button>
                </div>
            </div>
        </div>
    </div>
</div>


@section scripts{


    <script type="text/javascript">
        $(document).ready(function () {
            $("#MainForm").submit(function () {
                return ValidateForm();
            });
        });

        function cancelarCodigo() {
            if (confirm('Deseja cancelar este ITBI?')) {
                return true;
            } else {
                return false;
            }
        }

        function EditarComprador() {
            $('#CompradorModal').modal();
            document.getElementById('errorComprador').innerHTML = "";
        }

        function EditarVendedor() {
            $('#VendedorModal').modal();
            document.getElementById('errorVendedor').innerHTML = "";
        }

        $(document).ready(function () {
            $('#btnCompradorOk').click(function () {
                var cpfcompradorback = $("#CompradorModal #cpfcnpjc2Txt").val();
                var nomecompradorback = $("#CompradorModal #nomec2Txt").val();
                if (cpfcompradorback.trim() == "" || nomecompradorback.trim() == "" || cpfcompradorback == null || nomecompradorback==null) {
                    document.getElementById('errorComprador').innerHTML ="Digite o nome e o documento" ;
                } else {

                    var cnpjtmp = cpfcompradorback.padStart(14, '0');
                    var cpftmp = cpfcompradorback.padStart(11, '0');
                    var cpfcnpj = "";
                    if (cpfcompradorback.length > 11) {
                        if (!valida_Cnpj(cnpjtmp)) {
                            document.getElementById('errorComprador').innerHTML = "Nº de Cnpj inválido.";
                        } else {
                            cpfcnpj = cnpjtmp;
                        }
                    } else {
                        if (valida_Cnpj(cnpjtmp)) {
                            cpfcnpj = cnpjtmp;
                        } else {
                            if (!valida_Cpf(cpftmp)) {
                                document.getElementById('errorComprador').innerHTML = "Nº de Cpf inválido.";
                            } else {
                                cpfcnpj = cpftmp;
                            }
                        }
                    }
                    if (cpfcnpj == "") {
                        document.getElementById('errorComprador').innerHTML = "Nº de Cpf/Cnpj inválido.";
                    } else {
                        document.getElementById('Comprador_Cpf_cnpj_tmp').value = cpfcnpj;
                        document.getElementById('Comprador_Nome_tmp').value = nomecompradorback;
                        $("#CompradorModal #cpfcnpjc2Txt").val("");
                        $("#CompradorModal #nomec2Txt").val("");
                        $("#CompradorModal #errorComprador").val("");
                        $('#CompradorModal').modal('hide');
                        $("#MainForm").submit();
                    }
                }
            });
            $('#btnVendedorOk').click(function () {
                var cpfvendedorback = $("#VendedorModal #cpfcnpjc3Txt").val();
                var nomevendedorback = $("#VendedorModal #nomec3Txt").val();
                if (cpfvendedorback.trim() == "" || nomevendedorback.trim() == "" || cpfvendedorback == null || nomevendedorback == null) {
                    document.getElementById('errorVendedor').innerHTML = "Digite o nome e o documento";
                } else {

                    var cnpjtmp = cpfvendedorback.padStart(14, '0');
                    var cpftmp = cpfvendedorback.padStart(11, '0');
                    var cpfcnpj = "";
                    if (cpfvendedorback.length > 11) {
                        if (!valida_Cnpj(cnpjtmp)) {
                            document.getElementById('errorVendedor').innerHTML = "Nº de Cnpj inválido.";
                        } else {
                            cpfcnpj = cnpjtmp;
                        }
                    } else {
                        if (valida_Cnpj(cnpjtmp)) {
                            cpfcnpj = cnpjtmp;
                        } else {
                            if (!valida_Cpf(cpftmp)) {
                                document.getElementById('errorVendedor').innerHTML = "Nº de Cpf inválido.";
                            } else {
                                cpfcnpj = cpftmp;
                            }
                        }
                    }
                    if (cpfcnpj == "") {
                        document.getElementById('errorVendedor').innerHTML = "Nº de Cpf/Cnpj inválido.";
                    } else {
                        document.getElementById('Vendedor_Cpf_cnpj_tmp').value = cpfcnpj;
                        document.getElementById('Vendedor_Nome_tmp').value = nomevendedorback;
                        $("#VendedorModal #cpfcnpjc3Txt").val("");
                        $("#VendedorModal #nomec3Txt").val("");
                        $("#VendedorModal #errorVendedor").val("");
                        $('#VendedorModal').modal('hide');
                        $("#MainForm").submit();
                    }
                }
            });
        });
       
        function ValidateForm() {
            var _cod = document.getElementById('codigo').value;

            if (_cod == null || _cod == "" || parseInt(_cod) == 0) {
                document.getElementById('errorLabel').innerHTML = "Digite o código do imóvel";
                return false;
            }
            return true;
        }


    </script>
}
